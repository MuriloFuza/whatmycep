var estadoSelect=document.getElementById("estado"),cidadeInput=document.getElementById("cidade"),bairroInput=document.getElementById("bairro"),ruaInput=document.getElementById("rua"),numeroInput=document.getElementById("numero"),loader=document.getElementById("loader"),span=document.getElementById("resposta"),cookies=document.getElementsByClassName("cookie-popup"),botaoLimpar=document.getElementById("limpar"),formEnviar=document.getElementById("form-enviar"),botaoDoBiscoito=document.getElementById("cookie-button");function limparCampos(){estadoSelect.value="",cidadeInput.value="",bairroInput.value="",ruaInput.value="",numeroInput.value="",span.innerHTML="Você ainda não buscou seu CEP!",grecaptcha.reset()}function limparCamposConsulta(){estadoSelect.value="",cidadeInput.value="",bairroInput.value="",ruaInput.value="",numeroInput.value="",grecaptcha.reset()}botaoDoBiscoito.addEventListener("click",e=>{e.preventDefault(),cookies[0].style.display="none"}),formEnviar.addEventListener("submit",e=>{e.preventDefault();var u,e=estadoSelect.value,t=cidadeInput.value,l=bairroInput.value,n=ruaInput.value,i=numeroInput.value;!1!=(0!=grecaptcha.getResponse().length||(alert("Por favor, preencha o reCAPTCHA v2."),!1))&&(loader.style.display="block",url="https://viacep.com.br/ws/"+e+"/",t&&(url+=t+"/",n&&(url+=n+"/json")),fetch(""+url,{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{function t(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}if(console.log(e),(u=e.filter(e=>t(e.bairro).includes(t(l)))).length<1)return loader.style.display="none",void(span.innerHTML="Verifique seu endereço! Infelizmente não encontramos seu CEP");for(const a of u){const r=a.complemento.trim();if(r.startsWith("de"))if(r.endsWith("ao fim")){var n=r.split("/")[0].split(" ")[1];if(!(i<n)){span.innerHTML="Seu CEP é: "+a.cep;break}}else{var n=r.split("/")[0].split(" ")[1],o=r.split("/")[2];if(!(i<n||o<i)){span.innerHTML="Seu CEP é: "+a.cep;break}}else{o=r.split("/")[1];if(!(o<i)){span.innerHTML="Seu CEP é: "+a.cep;break}}}limparCamposConsulta(),loader.style.display="none"}).catch(e=>{console.log(e),span.innerHTML="Verifique seu endereço! Infelizmente não encontramos seu CEP"}))}),botaoLimpar.addEventListener("click",function(){limparCampos()});